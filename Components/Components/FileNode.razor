@using System.Collections.Generic

<div>
  <button class="text-nowrap overflow-scroll block text-start px-4 py-1 w-full
           hover:bg-gray-500 hover:text-white
           rounded-lg transition-all duration-200" @onclick="Toggle">

    <span class="text-2xl">@Item.GetIcon()</span>
    <span>@Item.GetName()</span>
  </button>

  @if (isExpanded && Item.IsDirectory())
  {
    <div class="ml-6 border-l border-gray-600 pl-2">
      @foreach (var child in Item.GetChildren(orderMethod))
      {
        <FileNode Item="@child" />
      }
    </div>
  }
</div>

@code {
  [Parameter]
  public FileSystem Item { get; set; } = default!;

  [Parameter]
  public int orderMethod { get; set; } = default!;

  private bool isExpanded = false;

  void Toggle()
  {
    if (!Item.IsDirectory())
      return;

    isExpanded = !isExpanded;

    if (isExpanded)
      Item.SetIcon("");
    else
      Item.SetIcon("");

  }
}
